(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["match_detail"],{"214f":function(t,e,i){"use strict";var a=i("32e9"),n=i("2aba"),s=i("79e5"),o=i("be13"),r=i("2b4c");t.exports=function(t,e,i){var c=r(t),l=i(o,c,""[t]),u=l[0],d=l[1];s(function(){var e={};return e[c]=function(){return 7},7!=""[t](e)})&&(n(String.prototype,t,u),a(RegExp.prototype,c,2==e?function(t,e){return d.call(t,this,e)}:function(t){return d.call(t,this)}))}},4917:function(t,e,i){i("214f")("match",1,function(t,e,i){return[function(i){"use strict";var a=t(this),n=void 0==i?void 0:i[e];return void 0!==n?n.call(i,a):new RegExp(i)[e](String(a))},i]})},"556b":function(t,e,i){},"604a":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"titleRow",class:{"title-border":"true"==t.border}},[i("div",{staticClass:"left"},[t._t("left")],2),i("div",{staticClass:"right"},[t._t("right")],2)])},n=[],s=(i("cadf"),i("551c"),i("097d"),{props:["border"],data:function(){return{}}}),o=s,r=(i("baed"),i("2877")),c=Object(r["a"])(o,a,n,!1,null,"53a0f7e0",null);c.options.__file="titleRow.vue";e["a"]=c.exports},6475:function(t,e,i){"use strict";var a=i("9ce5"),n=i.n(a);n.a},"8b2e":function(t,e,i){"use strict";var a=i("556b"),n=i.n(a);n.a},"9ce5":function(t,e,i){},a481:function(t,e,i){i("214f")("replace",2,function(t,e,i){return[function(a,n){"use strict";var s=t(this),o=void 0==a?void 0:a[e];return void 0!==o?o.call(a,s,n):i.call(String(s),a,n)},i]})},baed:function(t,e,i){"use strict";var a=i("e71e"),n=i.n(a);n.a},c5c2:function(t,e,i){"use strict";i.d(e,"b",function(){return n}),i.d(e,"a",function(){return s}),i.d(e,"c",function(){return o}),i.d(e,"d",function(){return r});var a=i("365c"),n=function(){return a["a"].get("api/match/list")},s=function(t){return a["a"].get("api/match/detail/"+t)},o=function(t,e,i){return a["a"].get("api/match/productions/".concat(t,"/").concat(e,"/").concat(i))},r=function(t,e,i){return a["a"].put("api/match/join",{match:t,user:e,pro:i})}},d494:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"multifunctionalCard",style:{width:t.width+"px"}},[i("div",{staticClass:"cover",on:{click:t.doView}},[i("img",{attrs:{src:t.img,alt:""}}),i("div",{staticClass:"menu",class:{active:t.active},on:{mouseover:function(e){t.active=!0},mouseout:function(e){t.active=!1}}},[i("div",{staticClass:"view",on:{click:function(e){return e.stopPropagation(),t.doView(e)}}},[t._v("play!")]),i("div",{staticClass:"bottom"},["hide"!=t.good?i("div",{staticClass:"good",class:{active:t.haveGood},on:{click:function(e){return e.stopPropagation(),t.doGood(e)}}},[i("i",{staticClass:"iconfont icon-good"})]):t._e(),"hide"!=t.good?i("div",{staticClass:"share",on:{click:function(e){return e.stopPropagation(),t.doShare(e)}}},[i("i",{staticClass:"iconfont icon-share"})]):t._e()])])]),i("div",{staticClass:"title"},[i("span",[t._v(t._s(t.title))])]),"hide"!=t.good?i("div",{staticClass:"history"},[i("span",{staticClass:"item"},[i("i",{staticClass:"iconfont icon-good"}),t._v(t._s(t.good))])]):t._e(),i("div",{staticClass:"other"},[i("div",{staticClass:"editor"},[i("div",{staticClass:"userHead"},[i("img",{attrs:{src:t.userHead,alt:""}})]),i("div",{staticClass:"userName"},[i("span",[t._v(t._s(t.userName))])])])])])},n=[],s=(i("cadf"),i("551c"),i("097d"),{props:["sign","width","img","title","views","good","userHead","userName","haveGood"],data:function(){return{active:!1}},methods:{doView:function(){console.log("do"),this.$emit("view",this.sign)},doGood:function(){this.$emit("good",this.sign,this.haveGood)},doShare:function(){this.$emit("share",this.sign)}},mounted:function(){$(document).ready(function(){$(".cover").height(.75*$(".cover").width())})}}),o=s,r=(i("8b2e"),i("2877")),c=Object(r["a"])(o,a,n,!1,null,"f759903c",null);c.options.__file="multifunctionalCard.vue";e["a"]=c.exports},e71e:function(t,e,i){},e981:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container-fluid"},[i("div",{staticClass:"row",staticStyle:{"margin-top":"20px"}},[i("div",{staticClass:"col-md-10 offset-md-1 articleBox"},[i("div",{staticClass:"title"},[i("h2",[t._v(t._s(t.match.title))]),i("small",[t._v(t._s(t._f("timeFilter")(t.match.dateTime)))])]),i("div",{staticClass:"content",domProps:{innerHTML:t._s(t.match.content)}}),i("div",{staticClass:"text-right",staticStyle:{margin:"10px 0"}},[i("span",[i("h2",[t._v(t._s(1==t.match.state?"进行中":"已结束"))])]),1==t.match.state?i("span",{staticClass:"btn btn-success btn-lg",on:{click:function(e){t.joinMatch(t.match.id)}}},[t._v("参加")]):t._e()]),0==t.match.state?i("div",[i("h2",[t._v("赛事结果")])]):t._e(),0==t.match.state?i("div",{staticClass:"content",domProps:{innerHTML:t._s(t.match.result)}}):t._e()])]),i("titleRow",{attrs:{border:"true"}},[i("div",{attrs:{slot:"left"},slot:"left"},[i("i",{staticClass:"iconfont icon-41"}),t._v("参赛作品\n      ")]),i("div",{attrs:{slot:"right"},slot:"right"})]),i("mescroll-vue",{ref:"mescroll",staticClass:"playGround-hot",attrs:{down:t.mescrollDown,up:t.mescrollUp},on:{init:t.mescrollInit}},[i("div",{staticClass:"d-flex justify-content-start align-items-center flex-wrap",staticStyle:{margin:"0 auto"}},t._l(t.dataList,function(e,a){return i("multifunctionalCard",{key:a,staticClass:"item",attrs:{slot:"item",sign:e.id,img:t.coverUrl+e.cover,title:e.title,views:e.clickNum,good:e.goodNum,haveGood:t.$store.state.good.indexOf(e.id)>=0,userHead:t.userheadUrl+e.userhead,userName:e.nickname},on:{view:t.goView,share:t.goShare,good:t.goGood},slot:"item"})}))]),i("div",{staticClass:"modal fade",attrs:{id:"joinMatch"}},[i("div",{staticClass:"modal-dialog modal-lg"},[i("div",{staticClass:"modal-content"},[t._m(0),i("div",{staticClass:"modal-body"},[i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"sel1"}},[t._v("请选择要参赛的作品:")]),i("select",{directives:[{name:"model",rawName:"v-model",value:t.joinSelect,expression:"joinSelect"}],staticClass:"form-control",attrs:{id:"sel1"},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.joinSelect=e.target.multiple?i:i[0]}}},t._l(t.userProductions,function(e,a){return i("option",{key:a,domProps:{value:e.id}},[t._v(t._s(e.title))])}))])]),i("div",{staticClass:"modal-footer"},[i("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:t.confirmToJoinMatch}},[t._v("确定")]),i("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("关闭")])])])])])],1)},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal-header"},[i("h4",{staticClass:"modal-title"},[t._v("参加赛事")]),i("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[t._v("×")])])}],s=(i("ac6a"),i("a481"),i("4917"),i("96cf"),i("3040")),o=i("604a"),r=i("d494"),c=i("8d6b"),l=i("51be"),u=i("c5c2"),d=i("dc66"),h=i("b7f9"),f={created:function(){this.baseUrl=l["b"],this.init()},data:function(){return{baseUrl:"",userheadUrl:"",coverUrl:"",match:{},mescroll:"",mescrollDown:{},dataList:[],joinSelect:"",userProductions:[],mescrollUp:{callback:this.upCallback,page:{num:0,size:10},noMoreSize:5,toTop:{src:"mescroll-totop.png"},lazyLoad:{use:!0}}}},methods:{init:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.baseUrl=l["b"],this.coverUrl=l["c"],this.userheadUrl=l["g"],this.$store.commit(h["g"]),t.next=6,Object(u["a"])(this.$route.params.id);case 6:if(e=t.sent,this.$store.commit(h["f"]),0!=e.data.state){t.next=11;break}return alert(e.data.text),t.abrupt("return");case 11:this.match=e.data.body,this.match.content=this.match.content.replace(/<img src="\//g,'<img src="'+this.baseUrl),this.match.result=this.match.result.replace(/<img src="\//g,'<img src="'+this.baseUrl);case 14:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),mescrollInit:function(t){this.mescroll=t},upCallback:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(e,i){var a,n=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return 1===e.num&&(this.dataList=[]),t.next=3,Object(u["c"])(this.$route.params.id,e.num,e.size);case 3:a=t.sent,a.data.body.forEach(function(t){n.dataList.push(t)}),this.$nextTick(function(){i.endSuccess(a.data.body.length)});case 6:case"end":return t.stop()}},t,this)}));return function(e,i){return t.apply(this,arguments)}}(),goView:function(t){window.open("/#/play/"+t)},goShare:function(t){alert("分享"+t)},goGood:function(t,e){e?(this.$store.dispatch(h["b"],t),this.localGoodPull(t)):(this.$store.dispatch(h["j"],t),this.localGoodAdd(t))},localGoodAdd:function(t){var e=this;this.hotPro.forEach(function(i,a){i.id==t&&(e.hotPro[a].goodNum+=1)}),this.newPro.forEach(function(i,a){i.id==t&&(e.newPro[a].goodNum+=1)})},localGoodPull:function(t){var e=this;this.hotPro.forEach(function(i,a){i.id==t&&(e.hotPro[a].goodNum-=1)}),this.newPro.forEach(function(i,a){i.id==t&&(e.newPro[a].goodNum-=1)})},joinMatch:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(e){var i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.$store.state.userInfo){t.next=3;break}return alert("请登录后操作"),t.abrupt("return");case 3:return this.$store.commit(h["g"]),t.next=6,Object(d["g"])(this.$store.state.userInfo.id);case 6:if(i=t.sent,this.$store.commit(h["f"]),0!=i.data.state){t.next=11;break}return alert(i.data.text),t.abrupt("return");case 11:this.userProductions=i.data.body,$("#joinMatch").modal("show");case 14:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),confirmToJoinMatch:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e,i=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(confirm("确认以作品<".concat(this.userProductions.filter(function(t){return t.id==i.joinSelect})[0].title,">参赛？"))){t.next=4;break}return t.abrupt("return");case 4:if(""!=this.joinSelect){t.next=8;break}alert("没有选择作品"),t.next=17;break;case 8:return t.next=10,Object(u["d"])(this.$route.params.id,this.$store.state.userInfo.id,this.joinSelect);case 10:if(e=t.sent,0!=e.data.state){t.next=14;break}return alert(e.data.text),t.abrupt("return");case 14:alert("参加成功!"),$("#joinMatch").modal("hide");case 17:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},components:{titleRow:o["a"],multifunctionalCard:r["a"],MescrollVue:c["a"]},mounted:function(){document.documentElement.clientWidth<=767&&$(".playGround-hot .item").css("width",document.documentElement.clientWidth-80+"px")},filters:{timeFilter:function(t){var e=new Date(parseInt(t)),i=e.getFullYear(),a=e.getMonth()+1,n=e.getDate();return i+"-"+(a<10?"0"+a:a)+"-"+(n<10?"0"+n:n)}}},m=f,v=(i("6475"),i("2877")),p=Object(v["a"])(m,a,n,!1,null,"6bc2731e",null);p.options.__file="detail.vue";e["default"]=p.exports}}]);
//# sourceMappingURL=match_detail.6c60b3bd.js.map